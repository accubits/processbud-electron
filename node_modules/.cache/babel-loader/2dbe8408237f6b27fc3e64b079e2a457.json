{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\leela\\\\OneDrive\\\\Desktop\\\\pb-angular-electron-main\\\\21-06-2021\\\\processbud\\\\src\\\\components\\\\rete.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport Rete from \"rete\";\nimport ReactRenderPlugin from \"rete-react-render-plugin\";\nimport ConnectionPlugin from \"rete-connection-plugin\";\nimport AreaPlugin from \"rete-area-plugin\";\nimport { MyNode } from \"./MyNode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar numSocket = new Rete.Socket(\"Number value\");\n\nclass NumControl extends Rete.Control {\n  constructor(emitter, key, node, readonly = false) {\n    super(key);\n    this.emitter = emitter;\n    this.key = key;\n    this.component = NumControl.component;\n    const initial = node.data[key] || 0;\n    node.data[key] = initial;\n    this.props = {\n      readonly,\n      value: initial,\n      onChange: v => {\n        this.setValue(v);\n        this.emitter.trigger(\"process\");\n      }\n    };\n  }\n\n  setValue(val) {\n    this.props.value = val;\n    this.putData(this.key, val);\n    this.update();\n  }\n\n}\n\nNumControl.component = ({\n  value,\n  onChange\n}) => /*#__PURE__*/_jsxDEV(\"input\", {\n  type: \"number\",\n  value: value,\n  ref: ref => {\n    ref && ref.addEventListener(\"pointerdown\", e => e.stopPropagation());\n  },\n  onChange: e => onChange(+e.target.value)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 5\n}, NumControl);\n\nclass NumComponent extends Rete.Component {\n  constructor() {\n    super(\"Number\");\n  }\n\n  builder(node) {\n    var out1 = new Rete.Output(\"num\", \"Number\", numSocket);\n    var out2 = new Rete.Output(\"num1\", \"Number\", numSocket);\n    var ctrl = new NumControl(this.editor, \"num\", node);\n    var ctr2 = new NumControl(this.editor, \"num1\", node);\n    return node.addControl(ctrl).addOutput(out1);\n    return node.addControl(ctr2).addOutput(out2);\n  }\n\n  worker(node, inputs, outputs) {\n    outputs[\"num\"] = node.data.num;\n    outputs[\"num1\"] = node.data.num1;\n  }\n\n}\n\nclass AddComponent extends Rete.Component {\n  constructor() {\n    super(\"Add\");\n    this.data.component = MyNode; // optional\n  }\n\n  builder(node) {\n    var inp1 = new Rete.Input(\"num1\", \"Number\", numSocket);\n    var inp2 = new Rete.Input(\"num2\", \"Number2\", numSocket);\n    var out = new Rete.Output(\"num\", \"Number\", numSocket);\n    var out1 = new Rete.Output(\"num1\", \"Number\", numSocket);\n    inp1.addControl(new NumControl(this.editor, \"num1\", node));\n    inp2.addControl(new NumControl(this.editor, \"num2\", node));\n    return node.addInput(inp1).addInput(inp2).addControl(new NumControl(this.editor, \"preview\", node, true)).addOutput(out).addOutput(out1);\n  }\n\n  worker(node, inputs, outputs) {\n    var n1 = inputs[\"num1\"].length ? inputs[\"num1\"][0] : node.data.num1;\n    var n2 = inputs[\"num2\"].length ? inputs[\"num2\"][0] : node.data.num2;\n    var sum = n1 + n2;\n    this.editor.nodes.find(n => n.id == node.id).controls.get(\"preview\").setValue(sum);\n    outputs[\"num\"] = sum;\n    outputs[\"num1\"] = sum;\n  }\n\n}\n\nexport async function createEditor(container) {\n  var components = [new NumComponent(), new AddComponent()];\n  var editor = new Rete.NodeEditor(\"demo@0.1.0\", container);\n  editor.use(ConnectionPlugin);\n  editor.use(ReactRenderPlugin);\n  var engine = new Rete.Engine(\"demo@0.1.0\");\n  components.map(c => {\n    editor.register(c);\n    engine.register(c);\n  });\n  var n1 = await components[0].createNode({\n    num: 2\n  });\n  var n2 = await components[0].createNode({\n    num: 3\n  });\n  var add = await components[1].createNode();\n  var add2 = await components[2].createNode();\n  n1.position = [80, 200];\n  n2.position = [80, 400];\n  add.position = [500, 240];\n  add2.position = [1000, 480];\n  editor.addNode(n1);\n  editor.addNode(n2);\n  editor.addNode(add);\n  editor.addNode(add2);\n  editor.connect(n1.outputs.get(\"num\"), add.inputs.get(\"num1\"));\n  editor.connect(n2.outputs.get(\"num\"), add.inputs.get(\"num2\"));\n  editor.on(\"process nodecreated noderemoved connectioncreated connectionremoved\", async () => {\n    console.log(\"process\");\n    await engine.abort();\n    await engine.process(editor.toJSON());\n  });\n  editor.view.resize();\n  editor.trigger(\"process\");\n  AreaPlugin.zoomAt(editor, editor.nodes);\n  return editor;\n}\nexport function useRete() {\n  _s();\n\n  const [container, setContainer] = useState(null);\n  const editorRef = useRef();\n  useEffect(() => {\n    if (container) {\n      createEditor(container).then(value => {\n        console.log(\"created\");\n        editorRef.current = value;\n      });\n    }\n  }, [container]);\n  useEffect(() => {\n    return () => {\n      if (editorRef.current) {\n        console.log(\"destroy\");\n        editorRef.current.destroy();\n      }\n    };\n  }, []);\n  return [setContainer];\n}\n\n_s(useRete, \"0OuBfB0wYFIOYgxG172r2AeQiN8=\");","map":{"version":3,"sources":["C:/Users/leela/OneDrive/Desktop/pb-angular-electron-main/21-06-2021/processbud/src/components/rete.jsx"],"names":["React","useState","useEffect","useCallback","useRef","Rete","ReactRenderPlugin","ConnectionPlugin","AreaPlugin","MyNode","numSocket","Socket","NumControl","Control","constructor","emitter","key","node","readonly","component","initial","data","props","value","onChange","v","setValue","trigger","val","putData","update","ref","addEventListener","e","stopPropagation","target","NumComponent","Component","builder","out1","Output","out2","ctrl","editor","ctr2","addControl","addOutput","worker","inputs","outputs","num","num1","AddComponent","inp1","Input","inp2","out","addInput","n1","length","n2","num2","sum","nodes","find","n","id","controls","get","createEditor","container","components","NodeEditor","use","engine","Engine","map","c","register","createNode","add","add2","position","addNode","connect","on","console","log","abort","process","toJSON","view","resize","zoomAt","useRete","setContainer","editorRef","then","current","destroy"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport Rete from \"rete\";\nimport ReactRenderPlugin from \"rete-react-render-plugin\";\nimport ConnectionPlugin from \"rete-connection-plugin\";\nimport AreaPlugin from \"rete-area-plugin\";\nimport { MyNode } from \"./MyNode\";\n\nvar numSocket = new Rete.Socket(\"Number value\");\n\nclass NumControl extends Rete.Control {\n  static component = ({ value, onChange }) => (\n    <input\n      type=\"number\"\n      value={value}\n      ref={(ref) => {\n        ref && ref.addEventListener(\"pointerdown\", (e) => e.stopPropagation());\n      }}\n      onChange={(e) => onChange(+e.target.value)}\n    />\n  );\n\n  constructor(emitter, key, node, readonly = false) {\n    super(key);\n    this.emitter = emitter;\n    this.key = key;\n    this.component = NumControl.component;\n\n    const initial = node.data[key] || 0;\n\n    node.data[key] = initial;\n    this.props = {\n      readonly,\n      value: initial,\n      onChange: (v) => {\n        this.setValue(v);\n        this.emitter.trigger(\"process\");\n      }\n    };\n  }\n\n  setValue(val) {\n    this.props.value = val;\n    this.putData(this.key, val);\n    this.update();\n  }\n}\n\nclass NumComponent extends Rete.Component {\n  constructor() {\n    super(\"Number\");\n  }\n\n  builder(node) {\n    var out1 = new Rete.Output(\"num\", \"Number\", numSocket);\n    var out2 = new Rete.Output(\"num1\", \"Number\", numSocket);\n    var ctrl = new NumControl(this.editor, \"num\", node);\n    var ctr2 = new NumControl(this.editor, \"num1\", node);\n\n    return node.addControl(ctrl).addOutput(out1);\n    return node.addControl(ctr2).addOutput(out2);\n  }\n\n  worker(node, inputs, outputs) {\n    outputs[\"num\"] = node.data.num;\n    outputs[\"num1\"] = node.data.num1;\n  }\n}\n\nclass AddComponent extends Rete.Component {\n  constructor() {\n    super(\"Add\");\n    this.data.component = MyNode; // optional\n  }\n\n  builder(node) {\n    var inp1 = new Rete.Input(\"num1\", \"Number\", numSocket);\n    var inp2 = new Rete.Input(\"num2\", \"Number2\", numSocket);\n    var out = new Rete.Output(\"num\", \"Number\", numSocket);\n    var out1 = new Rete.Output(\"num1\", \"Number\", numSocket);\n\n    inp1.addControl(new NumControl(this.editor, \"num1\", node));\n    inp2.addControl(new NumControl(this.editor, \"num2\", node));\n\n    return node\n      .addInput(inp1)\n      .addInput(inp2)\n      .addControl(new NumControl(this.editor, \"preview\", node, true))\n      .addOutput(out)\n      .addOutput(out1);\n  }\n\n  worker(node, inputs, outputs) {\n    var n1 = inputs[\"num1\"].length ? inputs[\"num1\"][0] : node.data.num1;\n    var n2 = inputs[\"num2\"].length ? inputs[\"num2\"][0] : node.data.num2;\n    var sum = n1 + n2;\n\n    this.editor.nodes\n      .find((n) => n.id == node.id)\n      .controls.get(\"preview\")\n      .setValue(sum);\n    outputs[\"num\"] = sum;\n    outputs[\"num1\"] = sum;\n  }\n}\n\nexport async function createEditor(container) {\n  var components = [new NumComponent(), new AddComponent()];\n\n  var editor = new Rete.NodeEditor(\"demo@0.1.0\", container);\n  editor.use(ConnectionPlugin);\n  editor.use(ReactRenderPlugin);\n\n  var engine = new Rete.Engine(\"demo@0.1.0\");\n\n  components.map((c) => {\n    editor.register(c);\n    engine.register(c);\n  });\n\n  var n1 = await components[0].createNode({ num: 2 });\n  var n2 = await components[0].createNode({ num: 3 });\n  var add = await components[1].createNode();\n  var add2 = await components[2].createNode();\n\n  n1.position = [80, 200];\n  n2.position = [80, 400];\n  add.position = [500, 240];\n  add2.position = [1000, 480];\n\n  editor.addNode(n1);\n  editor.addNode(n2);\n  editor.addNode(add);\n  editor.addNode(add2);\n\n  editor.connect(n1.outputs.get(\"num\"), add.inputs.get(\"num1\"));\n  editor.connect(n2.outputs.get(\"num\"), add.inputs.get(\"num2\"));\n\n  editor.on(\n    \"process nodecreated noderemoved connectioncreated connectionremoved\",\n    async () => {\n      console.log(\"process\");\n      await engine.abort();\n      await engine.process(editor.toJSON());\n    }\n  );\n\n  editor.view.resize();\n  editor.trigger(\"process\");\n  AreaPlugin.zoomAt(editor, editor.nodes);\n\n  return editor;\n}\n\nexport function useRete() {\n  const [container, setContainer] = useState(null);\n  const editorRef = useRef();\n\n  useEffect(() => {\n    if (container) {\n      createEditor(container).then((value) => {\n        console.log(\"created\");\n        editorRef.current = value;\n      });\n    }\n  }, [container]);\n\n  useEffect(() => {\n    return () => {\n      if (editorRef.current) {\n        console.log(\"destroy\");\n        editorRef.current.destroy();\n      }\n    };\n  }, []);\n\n  return [setContainer];\n}\n"]},"metadata":{},"sourceType":"module"}